<!DOCTYPE HTML>
<html lang="en" class="navy" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SOEM - AUTD3 Developers Manual v18.0.1</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../.././theme/codeblock_filename.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('navy')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../about_AUTD3.html"><strong aria-hidden="true">1.</strong> About AUTD3</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/users_manual.html"><strong aria-hidden="true">2.</strong> SDK User's Manual</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Users_Manual/concept.html"><strong aria-hidden="true">2.1.</strong> Concept</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/getting_started.html"><strong aria-hidden="true">2.2.</strong> Tutorial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Users_Manual/getting_started/rust.html"><strong aria-hidden="true">2.2.1.</strong> Rust</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/getting_started/cpp.html"><strong aria-hidden="true">2.2.2.</strong> C++</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/getting_started/cs.html"><strong aria-hidden="true">2.2.3.</strong> C#</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Users_Manual/getting_started/unity.html"><strong aria-hidden="true">2.2.3.1.</strong> Unity</a></li></ol></li><li class="chapter-item expanded "><a href="../../Users_Manual/getting_started/python.html"><strong aria-hidden="true">2.2.4.</strong> Python</a></li></ol></li><li class="chapter-item expanded "><a href="../../Users_Manual/versioning.html"><strong aria-hidden="true">2.3.</strong> Versioning</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/geometry.html"><strong aria-hidden="true">2.4.</strong> Geometry</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/link.html"><strong aria-hidden="true">2.5.</strong> Link</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Users_Manual/link/twincat.html"><strong aria-hidden="true">2.5.1.</strong> TwinCAT</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/link/soem.html" class="active"><strong aria-hidden="true">2.5.2.</strong> SOEM</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/link/simulator.html"><strong aria-hidden="true">2.5.3.</strong> Simulator</a></li></ol></li><li class="chapter-item expanded "><a href="../../Users_Manual/gain.html"><strong aria-hidden="true">2.6.</strong> Gain</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Users_Manual/gain/null.html"><strong aria-hidden="true">2.6.1.</strong> Null</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/gain/focus.html"><strong aria-hidden="true">2.6.2.</strong> Focus</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/gain/bessel.html"><strong aria-hidden="true">2.6.3.</strong> Bessel</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/gain/plane.html"><strong aria-hidden="true">2.6.4.</strong> Plane</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/gain/uniform.html"><strong aria-hidden="true">2.6.5.</strong> Uniform</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/gain/grouped.html"><strong aria-hidden="true">2.6.6.</strong> Group</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/gain/holo.html"><strong aria-hidden="true">2.6.7.</strong> Holo</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/gain/cache.html"><strong aria-hidden="true">2.6.8.</strong> Cache</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/gain/transform.html"><strong aria-hidden="true">2.6.9.</strong> Transform</a></li></ol></li><li class="chapter-item expanded "><a href="../../Users_Manual/modulation.html"><strong aria-hidden="true">2.7.</strong> Modulation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Users_Manual/modulation/static.html"><strong aria-hidden="true">2.7.1.</strong> Static</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/modulation/sine.html"><strong aria-hidden="true">2.7.2.</strong> Sine</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Users_Manual/modulation/fourier.html"><strong aria-hidden="true">2.7.2.1.</strong> Fourier</a></li></ol></li><li class="chapter-item expanded "><a href="../../Users_Manual/modulation/square.html"><strong aria-hidden="true">2.7.3.</strong> Square</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/modulation/wav.html"><strong aria-hidden="true">2.7.4.</strong> Wav</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/modulation/rawpcm.html"><strong aria-hidden="true">2.7.5.</strong> RawPCM</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/modulation/cache.html"><strong aria-hidden="true">2.7.6.</strong> Cache</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/modulation/radiation.html"><strong aria-hidden="true">2.7.7.</strong> Radiation</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/modulation/transform.html"><strong aria-hidden="true">2.7.8.</strong> Transform</a></li></ol></li><li class="chapter-item expanded "><a href="../../Users_Manual/stm.html"><strong aria-hidden="true">2.8.</strong> Spatio-Temporal Modulation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Users_Manual/stm/focus.html"><strong aria-hidden="true">2.8.1.</strong> FocusSTM</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/stm/gain.html"><strong aria-hidden="true">2.8.2.</strong> GainSTM</a></li></ol></li><li class="chapter-item expanded "><a href="../../Users_Manual/silencer.html"><strong aria-hidden="true">2.9.</strong> Silencer</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/controller.html"><strong aria-hidden="true">2.10.</strong> Controller</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/advanced_examples/advanced_examples.html"><strong aria-hidden="true">2.11.</strong> Advanced examples</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../Users_Manual/advanced_examples/custom_gain.html"><strong aria-hidden="true">2.11.1.</strong> Custom Gain</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/advanced_examples/custom_modulation.html"><strong aria-hidden="true">2.11.2.</strong> Custom Modulation</a></li></ol></li><li class="chapter-item expanded "><a href="../../Users_Manual/Simulator/simulator.html"><strong aria-hidden="true">2.12.</strong> Simulaotr</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/FAQ/faq.html"><strong aria-hidden="true">2.13.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/Citation/citation.html"><strong aria-hidden="true">2.14.</strong> Citation</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/LICENSE.html"><strong aria-hidden="true">2.15.</strong> License</a></li><li class="chapter-item expanded "><a href="../../Users_Manual/release_notes.html"><strong aria-hidden="true">2.16.</strong> Release notes</a></li></ol></li><li class="chapter-item expanded "><a href="../../document_history.html"><strong aria-hidden="true">3.</strong> Document history</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AUTD3 Developers Manual v18.0.1</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shinolab/autd3" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="soem"><a class="header" href="#soem">SOEM</a></h1>
<p><a href="https://github.com/OpenEtherCATsociety/SOEM">SOEM</a> is an open source EtherCAT master library developed by volunteers.
Unlike TwinCAT, it runs on a regular Windows PC, so real-time performance is not guaranteed.
Therefore, it is recommended to use TwinCAT.
SOEM should be used only if there is no other choice or only during development.
On the other hand, SOEM is cross-platform and easy to install.</p>
<p>If you are using Windows, install <a href="https://nmap.org/npcap/">npcap</a> in <strong>WinPcap API compatible mode</strong>.
If you are using Linux/macOS, no special preparation is required.</p>
<blockquote>
<p>NOTE: If you are using <code>SOEM</code>, be aware that it takes about 10-20 seconds after opening <code>Controller</code> for the EtherCAT slaves to synchronize with each other.
This period is subject to individual differences and changes depending on the synchronization signal/transmission cycle.
During this period, the ultrasound synchronization between devices is not guaranteed.</p>
</blockquote>
<ul>
<li><a href="#soem-link-api">SOEM link API</a></li>
<li><a href="#remotesoem">RemoteSOEM</a>
<ul>
<li><a href="#autd-server">AUTD Server</a></li>
<li><a href="#remotesoem-link-api">RemoteSOEM link API</a></li>
<li><a href="#soemautdserver">SOEMAUTDServer</a></li>
<li><a href="#firewall">Firewall</a></li>
</ul>
</li>
</ul>
<h2 id="soem-link-api"><a class="header" href="#soem-link-api">SOEM link API</a></h2>
<p>Following options can be specified for SOEM link.</p>
<pre><code class="language-rust should_panic edition2021"><span class="boring">extern crate autd3;
</span><span class="boring">extern crate tokio;
</span><span class="boring">extern crate autd3_link_soem;
</span>use autd3::prelude::*;
use autd3_link_soem::{SOEM, SyncMode};

<span class="boring">#[allow(unused_variables)]
</span><span class="boring">#[tokio::main]
</span><span class="boring">async fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
</span><span class="boring">let autd = Controller::builder()
</span><span class="boring">    .add_device(AUTD3::new(Vector3::zeros()))
</span><span class="boring">           .open_with(
</span>SOEM::builder()
    .with_ifname(&quot;&quot;)
    .with_buf_size(32)
    .with_on_err(|msg| {
        eprintln!(&quot;Unrecoverable error occurred: {msg}&quot;);
    })
    .with_state_check_interval(std::time::Duration::from_millis(100))
    .with_on_lost(|msg| {
        eprintln!(&quot;Unrecoverable error occurred: {msg}&quot;);
        std::process::exit(-1);
    })
    .with_sync0_cycle(2)
    .with_send_cycle(2)
    .with_timer_strategy(TimerStrategy::BusyWait)
    .with_sync_mode(SyncMode::DC)
<span class="boring">).await?;
</span><span class="boring">Ok(())
</span><span class="boring">}</span></code></pre>
<pre><code class="language-cpp">#include &quot;autd3/link/soem.hpp&quot;

[[noreturn]] void on_lost(const char* msg) {
  std::cerr &lt;&lt; &quot;Link is lost\n&quot; &lt;&lt; msg &lt;&lt; std::endl;
  exit(-1);
}

void on_err(const char* msg) { std::cerr &lt;&lt; &quot;Err: &quot; &lt;&lt; msg &lt;&lt; std::endl; }

autd3::link::SOEM::builder()
    .with_ifname(&quot;&quot;)
    .with_buf_size(32)
    .with_on_err(&amp;on_err)
    .with_state_check_interval(std::chrono::milliseconds(100))
    .with_on_lost(&amp;on_lost)
    .with_sync0_cycle(2)
    .with_send_cycle(2)
    .with_timer_strategy(autd3::TimerStrategy::BusyWait)
    .with_sync_mode(autd3::link::SyncMode::DC)
</code></pre>
<pre><code class="language-cs">using AUTD3Sharp;
using AUTD3Sharp.Link;

var onLost = new SOEM.OnErrCallbackDelegate(msg =&gt;
{
    Console.WriteLine($&quot;Unrecoverable error occurred: {msg}&quot;);
    Environment.Exit(-1);
});
var onErr = new SOEM.OnErrCallbackDelegate(msg =&gt;
{
    Console.WriteLine($&quot;Err: {msg}&quot;);
});

SOEM.Builder()
    .WithIfname(&quot;&quot;)
    .WithBufSize(32)
    .WithOnErr(onErr)
    .WithStateCheckInterval(TimeSpan.FromMilliseconds(100))
    .WithOnLost(onLost)
    .WithSync0Cycle(2)
    .WithSendCycle(2)
    .WithTimerStrategy(TimerStrategy.BusyWait)
    .WithSyncMode(SyncMode.DC)
</code></pre>
<pre><code class="language-python">import ctypes
import os
from datetime import timedelta
from typing import NoReturn

from pyautd3 import TimerStrategy
from pyautd3.link.soem import SOEM, OnErrFunc, SyncMode


def on_lost(msg: ctypes.c_char_p) -&gt; NoReturn:
    print(msg.decode(&quot;utf-8&quot;), end=&quot;&quot;)
    os._exit(-1)


def on_err(msg: ctypes.c_char_p) -&gt; None:
    print(msg.decode(&quot;utf-8&quot;), end=&quot;&quot;)


on_lost_func = OnErrFunc(on_lost)
on_err_func = OnErrFunc(on_err)
SOEM.builder()\
        .with_ifname(&quot;&quot;)\
        .with_buf_size(32)\
        .with_on_err(on_err_func)\
        .with_state_check_interval(timedelta(milliseconds=100))\
        .with_on_lost(on_lost_func)\
        .with_sync0_cycle(2)\
        .with_send_cycle(2)\
        .with_timer_strategy(TimerStrategy.BusyWait)\
        .with_sync_mode(SyncMode.DC)
</code></pre>
<ul>
<li><code>ifname</code>: Network interface name. The default is blank, and if it is blank, the network interface to which the AUTD3 device is connected is automatically selected.</li>
<li><code>buf_size</code>: Send queue buffer size. Usually, you don’t need to change it.</li>
<li><code>on_err</code>: Callback when some error occurs. The callback function takes an error message as an argument.</li>
<li><code>state_check_interval</code>: Interval to check if there is an error. The default is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord"><span class="mord">100</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathrm">ms</span></span></span></span></span></span>.</li>
<li><code>on_lost</code>: Callback when an unrecoverable error (e.g., cable is disconnected) occurs.<sup class="footnote-reference"><a href="#fn_soem_err">1</a></sup> The callback function takes an error message as an argument.</li>
<li><code>sync0_cycle</code>: Synchronization signal cycle. The default is 2 (unit is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord"><span class="mord">500</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathrm">us</span></span></span></span></span></span>).</li>
<li><code>send_cycle</code>: Send cycle. The default is 2 (unit is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord"><span class="mord">500</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathrm">us</span></span></span></span></span></span>).
<ul>
<li><code>SOEM</code> may become unstable when a large number of devices are connected<sup class="footnote-reference"><a href="#fn_soem">2</a></sup>. In this case, increase the values of <code>sync0_cycle</code> and <code>send_cycle</code>. These values should be as small as possible without causing errors. The default is 2, and the value depends on the number of devices connected. For example, if there are 9 devices, set the value to 3 or 4.</li>
</ul>
</li>
<li><code>timer_strategy</code>: Timer strategy. The default is <code>Sleep</code>.
<ul>
<li><code>Sleep</code>       : Use standard library sleep</li>
<li><code>BusyWait</code>    : Use busy wait. High resolution but high CPU load.</li>
<li><code>NativeTimer</code> : Use OS timer function
<ul>
<li>TimerQueueTimer on Windows, POSIX timer on linux, Grand Central Dispatch Timer on macOS</li>
</ul>
</li>
</ul>
</li>
<li><code>sync_mode</code>: Synchronization mode. See <a href="https://infosys.beckhoff.com/english.php?content=../content/1033/ethercatsystem/2469122443.html&amp;id=">Beckhoff’s explanation</a> for details.</li>
</ul>
<h1 id="remotesoem"><a class="header" href="#remotesoem">RemoteSOEM</a></h1>
<p>This link is used to separate the server PC running <code>SOEM</code> and the client PC running the user program.</p>
<p>To use <code>RemoteSOEM</code>, you need to prepare two PCs.
In this case, one PC must be able to use the <code>SOEM</code> link.
This PC is called the “server” here.
On the other hand, there are no particular restrictions on the PC on the development side that uses the SDK, and it is sufficient to be connected to the same LAN as the server.
This is called the “client” here.</p>
<p>First, connect the server and the AUTD device.
Then, connect the server and the client on different LANs<sup class="footnote-reference"><a href="#fn_remote_soem">3</a></sup>.
Then, check the IP of the LAN between the server and the client.
For example, suppose the server is “172.16.99.104”, and the client is “172.16.99.62”.</p>
<h2 id="autd-server"><a class="header" href="#autd-server">AUTD Server</a></h2>
<p>To use <code>RemoteSOEM</code>, install <code>AUTD Server</code> first.
The AUTD server’s installer is distributed on <a href="https://github.com/shinolab/autd3/releases">GitHub Releases</a>.</p>
<p>When you run <code>AUTD Server</code>, the following screen will appear, so open the “SOEM” tab.</p>
<figure>
  <img src="../../fig/Users_Manual/autdserver_remotesoem.jpg"/>
</figure>
<p>Set port number and click “Run” button.</p>
<h2 id="remotesoem-link-api"><a class="header" href="#remotesoem-link-api">RemoteSOEM link API</a></h2>
<p><code>RemoteSOEM</code> constructor takes <server ip address:port> as an argument.</p>
<pre><code class="language-rust should_panic edition2021"><span class="boring">extern crate autd3;
</span><span class="boring">extern crate tokio;
</span><span class="boring">extern crate autd3_link_soem;
</span><span class="boring">use autd3::prelude::*;
</span>use autd3_link_soem::RemoteSOEM;

<span class="boring">#[allow(unused_variables)]
</span><span class="boring">#[tokio::main]
</span><span class="boring">async fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
</span><span class="boring">let autd = Controller::builder()
</span><span class="boring">    .add_device(AUTD3::new(Vector3::zeros()))
</span><span class="boring">           .open_with(
</span>RemoteSOEM::builder(&quot;172.16.99.104:8080&quot;.parse()?)
<span class="boring">).await?;
</span><span class="boring">Ok(())
</span><span class="boring">}</span></code></pre>
<pre><code class="language-cpp">#include &quot;autd3/link/soem.hpp&quot;

autd3::link::RemoteSOEM::builder(&quot;172.16.99.104:8080&quot;)
</code></pre>
<pre><code class="language-cs">using System.Net;
using AUTD3Sharp.Link;

RemoteSOEM.Builder(new IPEndPoint(IPAddress.Parse(&quot;172.16.99.104&quot;), 8080))
</code></pre>
<pre><code class="language-python">from pyautd3.link.soem import RemoteSOEM

RemoteSOEM.builder(&quot;172.16.99.104:8080&quot;)
</code></pre>
<h2 id="soemautdserver"><a class="header" href="#soemautdserver">SOEMAUTDServer</a></h2>
<p>You can set options for <code>SOEM</code> with the option argument of <code>SOEMAUTDServer</code>.
Please see <code>SOEMAUTDServer --help</code> for details.</p>
<h2 id="firewall"><a class="header" href="#firewall">Firewall</a></h2>
<p>If you get a TCP-related error when using <code>RemoteSOEM</code>, it may be blocked by the firewall.</p>
<div class="footnote-definition" id="fn_soem"><sup class="footnote-definition-label">2</sup>
<p>It is looser than TwinCAT, and sometimes it works normally.</p>
</div>
<div class="footnote-definition" id="fn_soem_err"><sup class="footnote-definition-label">1</sup>
<p>It is unrecoverable, so there is nothing you can do but terminate it immediately.</p>
</div>
<div class="footnote-definition" id="fn_remote_soem"><sup class="footnote-definition-label">3</sup>
<p>It can be used even with wireless LAN.</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../Users_Manual/link/twincat.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../Users_Manual/link/simulator.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../Users_Manual/link/twincat.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../Users_Manual/link/simulator.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../.././theme/codeblock_filename.js"></script>


    </div>
    </body>
</html>
